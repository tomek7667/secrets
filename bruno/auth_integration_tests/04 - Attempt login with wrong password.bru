meta {
  name: 04 - Attempt login with wrong password
  type: http
  seq: 4
}

post {
  url: {{burl}}/login
  body: json
  auth: inherit
}

headers {
  Content-Type: application/json
}

body:json {
  {
    "username": "testuser_auth",
    "password": "WrongPassword123!"
  }
}

assert {
  res.status: eq 500
  res.body.success: eq false
  res.body.message: eq invalid username or password
}

tests {
  test("Login with wrong password should fail", function() {
    expect(res.getStatus()).to.equal(500);
    expect(res.getBody().success).to.equal(false);
    expect(res.getBody().message).to.equal("invalid username or password");
  });
}
